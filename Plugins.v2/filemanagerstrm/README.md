# STRM整理工具使用指南
## 功能说明
1. **扫描模式**：遍历指定影视库，找出所有「仅含元文件（封面/字幕/NFO）但无STRM文件」的目录，生成CSV报告；
2. **删除模式**：批量删除上述目录中的所有STRM文件（谨慎使用，建议先模拟运行）；
3. **复制模式**：从完整影视库复制对应目录的STRM文件及目录结构到指定输出路径。

## 配置项说明
| 配置项 | 说明 | 必填 |
|--------|------|------|
| 启用插件 | 开关控制插件是否生效 | 是 |
| 立即运行一次 | 点击后立即执行一次任务，执行后自动关闭 | 否 |
| 模拟运行 | 仅打印日志，不执行实际删除/复制操作 | 否 |
| 操作类型 | scan=扫描，delete=删除，copy=复制 | 是 |
| 定时执行周期 | 5位cron表达式，例：`0 0 * * *` 每天凌晨运行 | 否 |
| 当前影视库根路径 | 要扫描/处理的影视库路径（如/mnt/media） | 是 |
| 完整影视库路径 | 复制模式专用，存放完整STRM文件的库路径 | 仅复制模式需填 |
| 复制输出路径 | 复制模式专用，STRM文件输出路径 | 仅复制模式需填 |
| 最大工作线程数 | 多线程处理的最大线程数（1-32） | 否（默认8） |
| 结果CSV文件路径 | 扫描结果保存的CSV文件名（默认strm_result.csv） | 否 |

## 使用步骤
### 1. 扫描模式
- 配置「当前影视库根路径」；
- 操作类型选择「仅扫描缺失STRM」；
- 点击「立即运行一次」，等待完成后在MoviePilot插件数据目录查看CSV报告。

### 2. 删除模式
- 先执行扫描模式，确认需要删除的目录；
- 开启「模拟运行」，执行一次删除模式，确认日志无误；
- 关闭「模拟运行」，正式执行删除（谨慎操作！）。

### 3. 复制模式
- 配置「完整影视库路径」和「复制输出路径」；
- 执行扫描模式，确认缺失STRM的目录；
- 执行复制模式，STRM文件会按原目录结构复制到输出路径。

## 注意事项
1. 路径配置请使用绝对路径（如/mnt/media、D:/media）；
2. Windows系统需注意路径分隔符（建议用/而非\）；
3. 删除模式不可逆，务必先模拟运行确认；
4. 复制模式仅复制STRM和元文件，不复制视频文件；
5. 定时任务需填写合法的5位cron表达式（如不懂可留空，手动运行）。